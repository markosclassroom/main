{
    # Global options
    auto_https off  # Cloudflare handles HTTPS
    servers {
        metrics off
        protocols h1 h2 h3
    }
}

# Covers tickles.store and all subdomains
*.tickles.store, tickles.store {
    # Where your website files live
    root * /var/www/tickles

    # Enable static file serving
    file_server

    # Speed optimizations
    encode zstd gzip

    # Security and caching headers
    header {
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
        X-Content-Type-Options "nosniff"
        X-Frame-Options "DENY"
        Referrer-Policy "strict-origin-when-cross-origin"
        Cache-Control "public, max-age=31536000, immutable"
    }

    # Serve index.html by default
    try_files {path} {path}/ /index.html

    # Access logs (optional)
    log {
        output file /var/log/caddy/tickles.log
        format console
    }
}
