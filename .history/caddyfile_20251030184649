{
    auto_https off
    servers {
        protocols h1 h2 h3
    }
}

*.tickles.store, tickles.store {
    # Path to your site files
    root * C:\nginx\html

    # Serve static files
    file_server

    # Enable modern compression
    encode zstd gzip

    # Security and caching headers
    header {
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
        X-Content-Type-Options "nosniff"
        X-Frame-Options "DENY"
        Referrer-Policy "strict-origin-when-cross-origin"
        Cache-Control "public, max-age=31536000, immutable"
    }

    # Serve index.html if file not found
    try_files {path} {path}/ /index.html

    # ðŸ”¹ Custom 404 page
    handle_errors {
        @404 {
            expression {http.error.status_code} == 404
        }
        handle @404 {
            rewrite * /404.html
            file_server
        }
    }

    # Optional logging
    log {
        output file C:\nginx\html\caddy-access.log
        format console
    }
}
